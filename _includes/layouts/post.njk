---
# _includes/layouts/post.njk
# A two-column layout: article on left, sidebar on right
---
{% extends "layouts/base.njk" %}

{% block content %}
  <div style="display:grid; grid-template-columns:1fr 300px; gap:2rem; margin:2rem;">
  
    {# — MAIN ARTICLE COLUMN — #}
    <main>
      <article class="post" style="margin:0; padding:0;">

        {# — Draft Badge — #}
        {% if page.data.draft %}
          <p style="color:red; font-weight:bold;">⚠️ Draft Post</p>
        {% endif %}

        {# — Title — #}
        <h1 style="margin-bottom:0.5rem;">{{ title }}</h1>

        {# — Date — #}
        <p class="meta" style="color:#666; font-size:0.9rem; margin-top:0; margin-bottom:1.5rem;">
          {{ page.date | date }}
        </p>

        {# — Featured Image — #}
        {% if page.data.featured_image %}
          <div style="margin:1rem 0;">
            <img
              src="{{ page.data.featured_image }}"
              alt="{{ title }}"
              style="width:100%; height:auto; border-radius:4px;"
            />
          </div>
        {% endif %}

        {# — Body — #}
        <div class="post-body">
          {{ content | safe }}
        </div>

        {# — Tags at bottom too (optional) — #}
        {% if page.data.tags %}
          <div class="post-tags" style="margin-top:2rem;">
            <strong>Tags:</strong>
            <ul style="list-style:none; display:flex; flex-wrap:wrap; gap:0.5rem; padding:0; margin:0.5rem 0;">
              {% for tag in page.data.tags %}
                <li style="background:#eee; padding:0.3rem 0.6rem; border-radius:12px;">
                  <a href="/tags/{{ tag | slugify }}/" style="text-decoration:none; color:inherit;">
                    {{ tag }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </article>
    </main>

    {# — SIDEBAR COLUMN — #}
    <aside>
      <section class="sidebar-tags" style="margin-bottom:2rem;">
        <h3>Tags</h3>
        <div class="tags">
          {% for tag in collections.tagList %}
            <a href="/tags/{{ tag | slugify }}/" style="display:inline-block; margin:0.25rem; padding:0.3rem 0.6rem; border:1px solid #ccc; border-radius:4px; text-decoration:none;">
              {{ tag }}
            </a>
          {% endfor %}
        </div>
      </section>

      <section class="sidebar-subscribe">
        <h3>Subscribe</h3>
        <p>Get the latest posts delivered straight to your inbox</p>
        <form name="post-sidebar-newsletter" method="POST" data-netlify="true">
          <input type="email" name="email" placeholder="Email address" required style="width:100%; padding:0.5rem; margin-bottom:0.5rem;" />
          <button type="submit" style="width:100%; padding:0.5rem; background:#000; color:#fff; border:none; border-radius:4px;">
            Subscribe
          </button>
        </form>
      </section>
    </aside>
  </div>
{% endblock %}
