{# _includes/layouts/tag.njk #}
{% extends "layouts/base.njk" %}

{% block content %}
  <main
    style="
      display: flex;
      flex-wrap: wrap;
      max-width: 1100px;
      margin: 3rem auto;
      gap: 2rem;
      padding: 0 1rem;
    "
  >
    {# ——— Left: Posts list for this tag ——— #}
    <section style="flex: 3 1 0%; max-width: 800px;">
      <h1>Posts tagged “{{ tag }}”</h1>

      {% if posts.length %}
        <ul style="list-style:none; padding:0;">
          {% for post in posts %}
            <li style="margin-bottom:1.5rem;">
              <a
                href="{{ post.url }}"
                style="font-size:1.2rem; font-weight:bold;"
              >
                {{ post.data.title }}
              </a><br />
              {# ← **Here we use your existing date filter** without args #}
              <small>{{ post.date | date }}</small>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No posts found for this tag.</p>
      {% endif %}

      <p style="margin-top:2rem;">
        <a href="/tags.html">← Back to all tags</a>
      </p>
    </section>

    {# ——— Right: your standard sidebar ——— #}
    <aside class="sidebar" style="flex: 1 1 0%;">
      <div class="tags">
        <h3>Tags</h3>
        {% for t in collections.tagList %}
          <a href="/tags/{{ t | slugify }}/">{{ t }}</a>
        {% endfor %}
      </div>

      <div class="subscribe">
        <h3>Subscribe</h3>
        <p>Get the latest posts delivered straight to your inbox</p>
        <form name="sidebar-newsletter" method="POST" data-netlify="true">
          <input
            type="email"
            name="email"
            placeholder="Email address"
            required
          />
          <button type="submit">Subscribe</button>
        </form>
      </div>
    </aside>
  </main>
{% endblock %}
